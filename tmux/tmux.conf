# Change prefix to backtick (press `` to type a literal backtick)
unbind C-b
set -g prefix `
bind ` send-prefix

# Allow terminal escape sequences to pass through to the outer terminal
set -g allow-passthrough on

# Start windows and panes at 1 instead of 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1

# Enable extended keys for proper Shift+Enter support
set -s extended-keys on
set -as terminal-features ',*:extkeys'

# Set proper terminal type for 256 color and true color support
set -g default-terminal "tmux-256color"

# Enable true color (Tc) and other terminal features
set -ga terminal-overrides ",xterm-256color:Tc"
set -ga terminal-overrides ",*256col*:Tc"

# Support for undercurl and other extended features
set -ga terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -ga terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

# ============================================================================
# Status Bar Configuration (Powerline Style)
# ============================================================================

# Status bar general settings
set -g status on
set -g status-interval 5
set -g status-position bottom
set -g status-style 'bg=blue fg=black'

# Left side length
set -g status-left-length 100
set -g status-right-length 100

# Left status: session indicator
set -g status-left '#[bg=blue]#[fg=colour16,bold] â #S #[bg=blue,fg=blue]'

# Right status: bento profile, date/time
set -g status-right '#[bg=blue]#[fg=colour16] #(bento profile show 2>/dev/null | grep "^Name:" | cut -d: -f2 | xargs)  %b %d %H:%M '

# Window status (tabs)
# Show "name | process" if custom name, otherwise just process
set -g window-status-format '#[fg=blue]#[bg=brightblack,fg=white] #I  #{?#{==:#W,#{pane_current_command}},#W,#W | #{pane_current_command}} #[fg=brightblack,bg=blue]'
set -g window-status-current-format '#[fg=blue]#[bg=yellow]#[fg=colour16,bold] #I  #{?#{==:#W,#{pane_current_command}},#W,#W | #{pane_current_command}} #[fg=yellow,bg=blue]'

# Window status separator
set -g window-status-separator ''

# Pane border colors
set -g pane-border-style 'fg=brightblack'
set -g pane-active-border-style 'fg=blue'

# Message style
set -g message-style 'bg=yellow fg=black bold'
